<!doctype html>
<html lang="fr">
  <head>
    <!-- Google Tag Manager 1 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PFSK4LJZ');</script>
    <!-- End Google Tag Manager 1 -->

    <!-- Google Tag Manager 2 -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W485T7VB');</script>
    <!-- End Google Tag Manager 2 -->

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-P11JTJ21NZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-P11JTJ21NZ');
</script>


    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MDMC Music Ads - Marketing Musical</title>
    <!-- Cache busting v1.1 -->
    
    <!-- Meta tags par d√©faut -->
    <meta name="description" content="MDMC Music Ads - Plateforme de marketing musical professionnelle. Cr√©ez des smart links, analysez vos performances et d√©veloppez votre audience musicale." />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.mdmcmusicads.com/" />
    <meta property="og:title" content="MDMC Music Ads - Marketing Musical" />
    <meta property="og:description" content="Plateforme de marketing musical professionnelle. Cr√©ez des smart links, analysez vos performances et d√©veloppez votre audience musicale." />
    <meta property="og:image" content="https://www.mdmcmusicads.com/assets/images/logo.png" />
    <meta property="og:site_name" content="MDMC Music Ads" />
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://www.mdmcmusicads.com/" />
    <meta property="twitter:title" content="MDMC Music Ads - Marketing Musical" />
    <meta property="twitter:description" content="Plateforme de marketing musical professionnelle. Cr√©ez des smart links, analysez vos performances et d√©veloppez votre audience musicale." />
    <meta property="twitter:image" content="https://www.mdmcmusicads.com/assets/images/logo.png" />
    
    <!-- CSP CORRIG√âE pour MDMC - Autorise toutes les ressources n√©cessaires -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://www.googletagmanager.com https://www.google-analytics.com https://cdnjs.cloudflare.com https://connect.facebook.net https://analytics.tiktok.com https://capi-automation.s3.us-east-2.amazonaws.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com data:; img-src 'self' data: blob: https: http: https://via.placeholder.com https://www.facebook.com https://analytics.tiktok.com; media-src 'self' blob: data: https: https://res.cloudinary.com; connect-src 'self' https: http: ws: wss: https://api.mdmcmusicads.com https://api.airtable.com https://api.allorigins.win https://blog.mdmcmusicads.com https://blog-wp-production.up.railway.app https://mdmcv4-backend-production-b615.up.railway.app https://region1.google-analytics.com https://www.google-analytics.com https://stats.g.doubleclick.net https://ipapi.co https://www.googletagmanager.com https://connect.facebook.net https://www.facebook.com https://analytics.tiktok.com https://featurable.com; frame-src 'self' https://calendly.com https://www.googletagmanager.com; object-src 'none'; base-uri 'self';">
    
    <!-- Fonts Google pr√©-charg√©es -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&family=Inter:wght@300;400;500&display=swap" rel="stylesheet">
    
    <!-- üé® Color Thief via CDN pour extraction couleurs SmartLinks -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/color-thief/2.3.2/color-thief.umd.js"></script>
  </head>
  <body>
    <!-- Google Tag Manager 1 (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PFSK4LJZ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager 1 (noscript) -->

    <!-- Google Tag Manager 2 (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W485T7VB"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager 2 (noscript) -->
    
    <div id="root"></div>
    
    <!-- Script de redirection pour HashRouter et SEO -->
    <script>
      // Gestion des routes admin pour HashRouter
      (function() {
        const path = window.location.pathname;
        const hash = window.location.hash;
        const userAgent = navigator.userAgent || '';
        const isSocialBot = /facebook|twitter|linkedinbot|whatsapp|telegram|discord|slack|bot|crawler|spider/i.test(userAgent);
        
        // Redirection sp√©ciale pour les bots sociaux sur smartlinks
        if (isSocialBot && hash && hash.includes('/smartlinks/')) {
          const smartlinkMatch = hash.match(/#\/smartlinks\/([^\/]+)\/([^\/\?]+)/);
          if (smartlinkMatch) {
            const [, artistSlug, trackSlug] = smartlinkMatch;
            window.location.href = `/smartlinks/${artistSlug}/${trackSlug}`;
            return;
          }
        }
        
        // Si on acc√®de directement √† /admin sans hash, rediriger vers /#/admin
        if (path.startsWith('/admin') && !hash) {
          const adminPath = path.replace('/admin', '/admin');
          window.location.replace('/#' + adminPath);
          return;
        }
        
        // Si on acc√®de √† /admin sans hash sp√©cifique, rediriger vers /#/admin/login
        if (path === '/admin' && hash === '') {
          window.location.replace('/#/admin');
          return;
        }
      })();
    </script>
    
    <script type="module" src="/src/main.jsx" crossorigin="anonymous"></script>
  </body>
</html>
